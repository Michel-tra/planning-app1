{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\LENOVO\\\\planning-app1\\\\frontend\\\\src\\\\pages\\\\pointeur\\\\ScannerBadge.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport '../../styles/App.css'; // Assure-toi que ce chemin est correct\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ScannerBadge() {\n  _s();\n  const [badge, setBadge] = useState('');\n  const [message, setMessage] = useState('');\n  const inputRef = useRef(null);\n  const navigate = useNavigate();\n  const playBeep = (success = true) => {\n    const ctx = new (window.AudioContext || window.webkitAudioContext)();\n    const oscillator = ctx.createOscillator();\n    oscillator.type = 'sine';\n    oscillator.frequency.setValueAtTime(success ? 600 : 200, ctx.currentTime);\n    oscillator.connect(ctx.destination);\n    oscillator.start();\n    oscillator.stop(ctx.currentTime + (success ? 0.2 : 0.5));\n  };\n  const handleScan = async badgeCode => {\n    try {\n      const res = await axios.post('http://localhost:5000/api/pointages/pointeur', {\n        badge_code: badgeCode\n      });\n      setMessage(res.data.message);\n      playBeep(true);\n    } catch (err) {\n      console.error('Erreur lors du pointage :', err);\n      setMessage('Erreur lors du pointage.');\n      playBeep(false);\n    }\n  };\n  useEffect(() => {\n    if (badge.length >= 3) {\n      handleScan(badge);\n      setBadge('');\n    }\n  }, [badge]);\n  useEffect(() => {\n    inputRef.current.focus();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"scanner-container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"scanner-box\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"back-btn\",\n        onClick: () => navigate('/pointeur'),\n        children: \"\\u2B05 Retour au Dashboard\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"scanner-title\",\n        children: \"\\uD83D\\uDD0D Scanner un badge\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        ref: inputRef,\n        value: badge,\n        onChange: e => setBadge(e.target.value),\n        placeholder: \"Scannez ici...\",\n        className: \"scanner-input\",\n        autoFocus: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"scanner-message\",\n        children: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 29\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 9\n  }, this);\n}\n_s(ScannerBadge, \"OaDFP3VWFM17ISQoj6Z0SgLe5+I=\", false, function () {\n  return [useNavigate];\n});\n_c = ScannerBadge;\nexport default ScannerBadge;\nvar _c;\n$RefreshReg$(_c, \"ScannerBadge\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useNavigate","axios","jsxDEV","_jsxDEV","ScannerBadge","_s","badge","setBadge","message","setMessage","inputRef","navigate","playBeep","success","ctx","window","AudioContext","webkitAudioContext","oscillator","createOscillator","type","frequency","setValueAtTime","currentTime","connect","destination","start","stop","handleScan","badgeCode","res","post","badge_code","data","err","console","error","length","current","focus","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","ref","value","onChange","e","target","placeholder","autoFocus","_c","$RefreshReg$"],"sources":["C:/Users/LENOVO/planning-app1/frontend/src/pages/pointeur/ScannerBadge.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport '../../styles/App.css'; // Assure-toi que ce chemin est correct\r\n\r\nfunction ScannerBadge() {\r\n    const [badge, setBadge] = useState('');\r\n    const [message, setMessage] = useState('');\r\n    const inputRef = useRef(null);\r\n    const navigate = useNavigate();\r\n\r\n    const playBeep = (success = true) => {\r\n        const ctx = new (window.AudioContext || window.webkitAudioContext)();\r\n        const oscillator = ctx.createOscillator();\r\n        oscillator.type = 'sine';\r\n        oscillator.frequency.setValueAtTime(success ? 600 : 200, ctx.currentTime);\r\n        oscillator.connect(ctx.destination);\r\n        oscillator.start();\r\n        oscillator.stop(ctx.currentTime + (success ? 0.2 : 0.5));\r\n    };\r\n\r\n    const handleScan = async (badgeCode) => {\r\n        try {\r\n            const res = await axios.post('http://localhost:5000/api/pointages/pointeur', {\r\n                badge_code: badgeCode\r\n            });\r\n            setMessage(res.data.message);\r\n            playBeep(true);\r\n        } catch (err) {\r\n            console.error('Erreur lors du pointage :', err);\r\n            setMessage('Erreur lors du pointage.');\r\n            playBeep(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (badge.length >= 3) {\r\n            handleScan(badge);\r\n            setBadge('');\r\n        }\r\n    }, [badge]);\r\n\r\n    useEffect(() => {\r\n        inputRef.current.focus();\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"scanner-container\">\r\n            <div className=\"scanner-box\">\r\n                <button className=\"back-btn\" onClick={() => navigate('/pointeur')}>\r\n                    ‚¨Ö Retour au Dashboard\r\n                </button>\r\n\r\n                <h2 className=\"scanner-title\">üîç Scanner un badge</h2>\r\n                <input\r\n                    type=\"text\"\r\n                    ref={inputRef}\r\n                    value={badge}\r\n                    onChange={(e) => setBadge(e.target.value)}\r\n                    placeholder=\"Scannez ici...\"\r\n                    className=\"scanner-input\"\r\n                    autoFocus\r\n                />\r\n                {message && <p className=\"scanner-message\">{message}</p>}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ScannerBadge;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}